name: download_images
description: Component that downloads images based on URLs
inputs: 
    - name: input_manifest_path
      description: Path to the input manifest
      type: String

    - name: timeout
      description: Maximum time (in seconds) to wait when trying to download an image
      type: Integer

    - name: retries
      description: Number of times to retry downloading an image if it fails.
      type: Integer

    - name: image_size
      description: Size of the images.
      type: Integer 

    - name: resize_mode
      description: Resize mode to use.
      type: String 

    - name: resize_only_if_bigger
      description: Resize mode to use.
      type: String 

    - name: resize_mode
      description: If True, resize only if image is bigger than image_size.
      type: Boolean

    - name: min_image_size
      description: Minimum size of the images.
      type: Integer 

    - name: max_aspect_ratio
      description: Maximum aspect ratio of the images.
      type: Float   
   
outputs:
    - name: output_manifest_path
      description: Path to the output manifest

implementation:
    container:
        image: ghcr.io/ml6team/image_filtering:latest
        command: [
            python3, main.py,
            --input_manifest_path,       {inputPath: input_manifest_path},
            --timeout,                   {inputValue: timeout},
            --retries,                   {inputValue: retries},
            --image_size,                {inputValue: image_size},
            --resize_mode,               {inputValue: resize_mode},
            --resize_only_if_bigger,     {inputValue: resize_only_if_bigger},
            --min_image_size,            {inputValue: min_image_size},
            --max_aspect_ratio,          {inputValue: max_aspect_ratio},
            --output_manifest_path,      {outputPath: output_manifest_path},
        ]