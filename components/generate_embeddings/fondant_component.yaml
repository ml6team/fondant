name: Generate embeddings
description: Component that generates embeddings of text passages.
image: generate_embeddings:latest

consumes:
  text:
    fields:
      data:
        type: string

produces:
  text:
    fields:
      data:
        type: string
      embedding:
        type: array
        items:
          type: float32
          
args:
  model_provider:
    description: |
      The provider of the model - corresponding to langchain embedding classes. 
      Currently the following providers are supported: aleph_alpha, cohere, huggingface, openai.
    type: str
    default: huggingface
  model:
    description: |
      The model to generate embeddings from. 
      Choose an available model name to pass to the model provider's langchain embedding class.
    type: str
    default: all-MiniLM-L6-v2
  api_keys:
    description: |
      The API keys to use for the model provider that are written to environment variables.
      Pass only the keys required by the model provider or conveniently pass all keys you will ever need. 
      Pay attention how to name the dictionary keys so that they can be used by the model provider.
      You can find all currently supported/ needed key in the default value.
    type: dict
    default: {"ALEPH_ALPHA_API_KEY": "api_key", "COHERE_API_KEY": "api_key", "OPENAI_API_KEY": "api_key"}
  
  